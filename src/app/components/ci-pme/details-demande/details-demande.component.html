<p>details-demande works!</p>
<div class="mx-5 px-5 parent">
	<div class="card p-4 animate__animated animate__backInUp" style="border-radius: 10px">
	  <div class="card-body">

		<div *ngIf="demande && demande?.status != 7 && connectedUser?.profil?.code == 'ROLE_EXP_PME'" class="mt-2 mb-4 d-flex justify-content-end">	
			<div *ngIf="demande?.status == 6">
				<button class="btn btn-sm bgc-secondary">
				<a [routerLink]="['/ci-pme/accueil', demande?.entrepriseDTO?.id, 'demandes-cloturees']"  >
					Voir toutes les demandes clôturées
				</a>
				</button>
			</div>
		</div>
  
		<div class="card-title py-1" *ngIf="demande">
		  <h3>Informations de la demande de scoring</h3>
		</div>
		<div class="card" *ngIf="demande">
		  <div class="card-body col-lg-6 offset-lg-3">
			<div class="card">
			  <div class="card-body mb-6">
				<div class="mt-2">
				  <div>
					<div class="line">
					  <label class="mr-2">Statut Demande : </label>
					  <span [ngClass]="{'error-status': [7, 6].includes(demande?.status)}"
						*ngIf="[7, 6].includes(demande?.status)"> {{ demande?.libelleStatut }}</span>
					  <span [ngClass]="{'success-status': ![7, 6].includes(demande?.status)}"
						*ngIf="![7, 6].includes(demande?.status)"> {{ demande?.libelleStatut }}</span>
					</div>
					<hr class="mt-lg-n2">
				  </div>
				  
				  <div *ngIf="demande?.motif">
					<div class="line">
					  <label class="mr-2" *ngIf="demande?.status == 4">Motif rejet : </label>
					  <label class="mr-2" *ngIf="demande?.status == 7">Motif annulation : </label>
					  <span> {{demande?.motif }}</span>
					</div>
					<hr class="mt-lg-n2">
				  </div>
  
				  <div *ngIf="demande?.dateCreation">
					<div class="line">
					  <label class="mr-2">Date de création : </label>
					  <span> {{formatDate(demande?.dateCreation)}}</span>
					</div>
					<hr class="mt-lg-n2">
				  </div>
  
				  <div *ngIf="demande?.dateEnvoie">
					<div class="line">
					  <label class="mr-2">Date d'envoi: </label>
					  <span> {{formatDate(demande?.dateEnvoie)}}</span>
					</div>
					<hr class="mt-lg-n2">
				  </div>
  
				  <div *ngIf="demande?.dateReception">
					<div class="line">
					  <label class="mr-2">Date de reception: </label>
					  <span> {{formatDate(demande?.dateReception)}}</span>
					</div>
					<hr class="mt-lg-n2">
				  </div>
  
				</div>
			  </div>
			</div>
		  </div>
		</div>
  
		<div class="card-title py-1" *ngIf="demandeAccompagnement && ((connectedUser?.profil?.code == 'ROLE_EXP_PME' && demandeAccompagnement?.status != 4) || connectedUser?.profil?.code == 'ROLE_ENTR')">
		  <h3>Informations de la demande d'accompagnement</h3>
		</div>
		<div class="card" *ngIf="demandeAccompagnement">
		  <div class="card-body">
			<div class="card">
			  <div class="card-body mb-6">
				<div class="mt-2">
				  <div>
					<div class="line">
					  <label class="mr-2">Statut Demande : </label>
					  <span [ngClass]="{'error-status': [7, 6].includes(demandeAccompagnement?.status)}"
						*ngIf="[7, 6].includes(demandeAccompagnement?.status)"> {{ demandeAccompagnement?.libelleStatut }}</span>
					  <span [ngClass]="{'success-status': ![7, 6].includes(demandeAccompagnement?.status)}"
						*ngIf="![7, 6].includes(demandeAccompagnement?.status)"> {{ demandeAccompagnement?.libelleStatut }}</span>
					</div>
					<hr class="mt-lg-n2">
				  </div>
				  
				  <div *ngIf="demandeAccompagnement?.dateCreation">
					<div class="line">
					  <label class="mr-2">Date de création : </label>
					  <span> {{formatDate(demandeAccompagnement?.dateCreation)}}</span>
					</div>
					<hr class="mt-lg-n2">
				  </div>
  
				  <div *ngIf="demandeAccompagnement?.dateEnvoie">
					<div class="line">
					  <label class="mr-2">Date d'envoi: </label>
					  <span> {{formatDate(demandeAccompagnement?.dateEnvoie)}}</span>
					</div>
					<hr class="mt-lg-n2">
				  </div>
  
				  <div *ngIf="demandeAccompagnement?.dateReception">
					<div class="line">
					  <label class="mr-2">Date de reception: </label>
					  <span> {{formatDate(demandeAccompagnement?.dateReception)}}</span>
					</div>
					<hr class="mt-lg-n2">
				  </div>
  
				</div>
			  </div>
			</div>
		  </div>
		</div>
  
		<div class="card-title py-1">
		  <h3 class="my-2">Informations du scoring</h3>
		</div>

		<div class="row">
			<div class="col-lg-3"></div>
			<div class="col-lg-6">
				<div *ngIf="displayRadar" class="card mt-4">
				<div class="card-body">
					<h5 class="bloc-title my-4">-- Radar des scores de l'entreprise --</h5>
					<hr>
		
					<div class="mt-2">
					<app-radar [labels]="chartLibelles" [values]="chartValues" [chartType]="radarChartType"></app-radar>
					</div>
				</div>
				</div>
			</div>
			<div class="col-lg-3"></div>
    </div>

		<div class="row">
			
			<div class="col-lg-6">
			<div *ngIf="displayRatio" class="card mt-4">
			  <div class="card-body">
				<h5 class="bloc-title my-4">-- Score financier de l'entreprise --</h5>
				<hr>
	  
				<div class="mt-2">
				  <table class="table table-bordered table-striped">
					<caption style="font-size: 18px; font-weight: bolder; text-align: center">Score financier : {{roundValue(listRatio?.scoreDTO?.score_financier)}}</caption>
					<thead>
					<tr>
					  <td style="width: 5%">Code</td>
					  <td>Nom Ratio</td>
					  <td>Valeur</td>
					  <td style="width: 19%">Ratio calibré</td>
					</tr>
					</thead>
					<tbody>
					  <tr *ngFor="let r of listRatio?.listValeurRatioDTO">
						<th style="width: 5%">{{r.codeRatio}}</th>
						<td>{{r.nomRatio}}</td>
						<td style="text-align: right">{{roundValue(r.valeur)}}</td>
						<td style="width: 17%; text-align: right">{{r.classe}}</td>
					  </tr>
					</tbody>
				  </table>
				</div>
			  </div>
			</div>
			</div>
			
			<div class="col-lg-6">
			<div *ngIf="displayScoreQualitatif" class="card mt-4">
			  <div class="card-body">
				<h5 class="bloc-title my-4">-- Score des Paramétres Qualitatifs de l'entreprise --</h5>
				<hr>
	  
				<div class="mt-2">
				  <table class="table table-striped table-bordered">
					<thead>
					<tr>
					  <th scope="col">Paramétre Qualitatif</th>
					  <th scope="col">Score</th>
					</tr>
					</thead>
					<tbody>
					  <tr *ngIf="scoreFinal">
						<td>Score Financier/Solvabilité</td>
						<td>{{ scoreFinal?.score_financier }}</td>
					  </tr>
					<tr *ngFor="let s of scores">
						<td>{{s.parametre?.libelle}}</td>
						<td>{{formatNumberNDecimal((s.score), 1) }}</td>
					</tr>
					</tbody>
					<tfoot *ngIf="scoreFinal?.score_final">
					  <tr class="total">
						<th>Score de la PME</th>
						<th>{{ formatNumberNDecimal(scoreFinal?.score_final, 1) }} </th>
					  </tr>
					</tfoot>
				  </table>
				</div>
			  </div>
			</div>
			</div>
		</div>

	  </div>
	</div>
  </div>
  
  